<!DOCTYPE html>
<html lang="ku">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Quiz App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --system-blue: #007aff;
            --system-green: #34c759;
            --system-red: #ff3b30;
            --system-gray-1: #f2f2f7; /* Primary background */
            --system-gray-2: #ffffff; /* Grouped component background */
            --system-gray-3: #c7c7cc; /* Borders, separators */
            --label-primary: #000000;
            --label-secondary: #8e8e93;
        }
        html, body {
            height: 100%;
            overflow: hidden;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
            background-color: var(--system-gray-1);
            color: var(--label-primary);
            overscroll-behavior: none;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        #app-container { -webkit-overflow-scrolling: touch; }
        #app-content { position: relative; }
        .app-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.35s cubic-bezier(0.4, 0.0, 0.2, 1);
            will-change: transform;
            padding-bottom: 90px; /* Space for tab bar */
        }
        .app-view.hidden { display: none; }

        @keyframes slide-in-right { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes slide-out-left { from { transform: translateX(0); } to { transform: translateX(-100%); } }
        @keyframes slide-in-left { from { transform: translateX(-100%); } to { transform: translateX(0); } }
        @keyframes slide-out-right { from { transform: translateX(0); } to { transform: translateX(100%); } }

        .slide-in-right { animation: slide-in-right 0.35s cubic-bezier(0.4, 0.0, 0.2, 1) forwards; }
        .slide-out-left { animation: slide-out-left 0.35s cubic-bezier(0.4, 0.0, 0.2, 1) forwards; }
        .slide-in-left { animation: slide-in-left 0.35s cubic-bezier(0.4, 0.0, 0.2, 1) forwards; }
        .slide-out-right { animation: slide-out-right 0.35s cubic-bezier(0.4, 0.0, 0.2, 1) forwards; }

        .tab-button.active { color: var(--system-blue); }

        .list-inset-grouped {
            margin: 1rem;
            border-radius: 0.75rem;
            background-color: var(--system-gray-2);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .list-item {
            padding: 0.85rem 1rem;
            border-bottom: 1px solid var(--system-gray-3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        .list-item:last-child { border-bottom: none; }
        .quiz-option {
            background-color: var(--system-gray-2);
            transition: background-color 0.2s ease, border-color 0.2s ease;
            border: 2px solid transparent;
        }
        .quiz-option.correct {
            background-color: #eaf9ed;
            border-color: var(--system-green);
        }
        .quiz-option.incorrect {
            background-color: #ffeeed;
            border-color: var(--system-red);
        }
    </style>
</head>
<body class="flex justify-center items-center bg-black">

    <div id="app-container" class="w-full max-w-md h-full flex flex-col bg-[var(--system-gray-1)] shadow-2xl overflow-hidden">
        
        <header id="app-header" class="relative flex items-center justify-center p-3 bg-[var(--system-gray-1)]/80 backdrop-blur-md border-b border-[var(--system-gray-3)] flex-shrink-0">
            <button id="back-button" class="absolute left-4 hidden text-[var(--system-blue)] text-lg flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg>
                <span id="back-button-text">پاشگەزبوونەوە</span>
            </button>
            <h1 id="header-title" class="text-lg font-semibold text-center mx-auto">کategorî</h1>
        </header>

        <main id="app-content" class="flex-1 overflow-y-auto relative">
            
            <div id="categories-view" class="app-view">
                <ul id="category-list" class="list-inset-grouped">
                    <!-- Categories will be rendered here by JavaScript -->
                </ul>
            </div>

            <div id="quiz-view" class="app-view hidden">
                <div class="p-4">
                    <div class="flex justify-between items-center mb-2">
                        <p class="text-sm text-[var(--label-secondary)]">پرسیار <span id="question-counter">1</span> / <span id="total-questions">10</span></p>
                        <p class="text-sm font-semibold">Score: <span id="score-display">0</span></p>
                    </div>
                    <div class="w-full bg-[var(--system-gray-3)] rounded-full h-2 mb-6">
                        <div id="progress-bar" class="bg-[var(--system-blue)] h-2 rounded-full" style="width: 10%"></div>
                    </div>
                    <div class="flex items-start space-x-3 mb-4">
                        <h2 id="question-text" class="text-2xl font-bold flex-1">...</h2>
                        <button id="speak-question-button" class="p-2 text-[var(--label-secondary)]">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" /></svg>
                        </button>
                    </div>
                    <div id="options-container" class="space-y-3">
                        <!-- Options will be rendered here -->
                    </div>
                </div>
            </div>

            <div id="results-view" class="app-view hidden flex flex-col items-center justify-center text-center">
                 <div class="p-4">
                    <h2 class="text-2xl font-bold mb-2">کۆتایی کویز!</h2>
                    <p class="text-lg text-[var(--label-secondary)] mb-6">ئەنجامی کۆتاییت:</p>
                    <p class="text-6xl font-bold mb-8"><span id="final-score">0</span> / <span id="total-score">0</span></p>
                    <button id="play-again-button" class="w-full bg-[var(--system-blue)] text-white font-semibold py-3 px-6 rounded-lg">دووبارە یاری بکەرەوە</button>
                </div>
            </div>
            
        </main>

        <nav id="app-tab-bar" class="flex justify-around items-center py-2 bg-[var(--system-gray-1)]/80 backdrop-blur-md border-t border-[var(--system-gray-3)] flex-shrink-0">
             <button class="tab-button active flex flex-col items-center p-2 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                <span class="text-xs mt-1">کویزەکان</span>
            </button>
        </nav>
    </div>

    <script>
        const quizData = {
            history: {
                title: "مێژوو",
                questions: [
                    { question: "دامەزرێنەری ئیمپراتۆریەتی عوسمانی کێ بوو؟", options: ["عوسمانی یەکەم", "سوڵتان سولەیمان", "محەمەدی دووەم", "ئەحمەدی یەکەم"], answer: "عوسمانی یەکەم" },
                    { question: "ئیمپراتۆریەتی ئەکەدی لە چ ناوچەیەکدا سەریهەڵدا؟", options: ["میزۆپۆتامیا", "میسر", "یۆنان", "ڕۆما"], answer: "میزۆپۆتامیا" },
                    { question: "کام شارستانیەت بە یاساکانی حاموڕابی بەناوبانگە؟", options: ["بابل", "ئاشوور", "سۆمەر", "فارس"], answer: "بابل" },
                    { question: "شاری نەینەوا پایتەختی کام ئیمپراتۆریەت بوو؟", options: ["ئاشوور", "کلدان", "ماد", "ساسانی"], answer: "ئاشوور" },
                    { question: "فەتحی قوستەنتینیە لەلایەن سوڵتان محەمەدی دووەمەوە لە چ ساڵێکدا بوو؟", options: ["١٤٥٣", "١٢٩٩", "١٥٢٠", "١٦٨٣"], answer: "١٤٥٣" }
                ]
            },
            geography: {
                title: "جوگرافیا",
                questions: [
                    { question: "درێژترین ڕووبار لە جیهاندا کامەیە؟", options: ["نیل", "ئەمازۆن", "یانگتزی", "میسیسیپی"], answer: "نیل" },
                    { question: "گەورەترین بیابان لە جیهاندا کامەیە؟", options: ["بیابانی گەورەی عەرەبی", "گۆبی", "بیابانی ئەنتارکتیکا", "کالاهاری"], answer: "بیابانی ئەنتارکتیکا" },
                    { question: "کام وڵات بە 'خاکی خۆری هەڵاتوو' ناسراوە؟", options: ["ژاپۆن", "چین", "کۆریای باشوور", "ڤێتنام"], answer: "ژاپۆن" },
                    { question: "بەرزترین شاخ لە جیهاندا چییە؟", options: ["کەی توو", "کانگچێنجونگا", "ئێڤرێست", "لۆتسێ"], answer: "ئێڤرێست" },
                    { question: "کام زەریا گەورەترینە لە جیهاندا؟", options: ["زەریای هێمن", "زەریای ئەتڵەسی", "زەریای هیندی", "زەریای بەستەڵەکی باکوور"], answer: "زەریای هێمن" }
                ]
            },
            science: {
                title: "زانست",
                questions: [
                    { question: "ناوەکی خانە چی تێدایە؟", options: ["DNA", "ڕایبۆسۆم", "مایتۆکۆندریا", "پرۆتین"], answer: "DNA" },
                    { question: "خێراترین گیانەوەر لەسەر وشکانی کامەیە؟", options: ["پڵنگی چیتا", "شێر", "گورگ", "ئاسک"], answer: "پڵنگی چیتا" },
                    { question: "کام گە ग्रह بە 'هەسارەی سوور' ناسراوە؟", options: ["مەریخ", "زەوی", "ڤینۆس", "موشتەری"], answer: "مەریخ" },
                    { question: "فۆرمولەی کیمیایی ئاو چییە؟", options: ["H2O", "CO2", "O2", "NaCl"], answer: "H2O" },
                    { question: "یەکەی پێوانەکردنی هێز چییە؟", options: ["نیوتن", "وات", "جوول", "پاسکال"], answer: "نیوتن" }
                ]
            }
        };

        // DOM Elements
        const headerTitle = document.getElementById('header-title');
        const backButton = document.getElementById('back-button');
        const backButtonText = document.getElementById('back-button-text');
        
        const categoryList = document.getElementById('category-list');
        const questionCounter = document.getElementById('question-counter');
        const totalQuestions = document.getElementById('total-questions');
        const scoreDisplay = document.getElementById('score-display');
        const progressBar = document.getElementById('progress-bar');
        const questionText = document.getElementById('question-text');
        const speakQuestionButton = document.getElementById('speak-question-button');
        const optionsContainer = document.getElementById('options-container');

        const finalScoreEl = document.getElementById('final-score');
        const totalScoreEl = document.getElementById('total-score');
        const playAgainButton = document.getElementById('play-again-button');

        const views = {
            categories: document.getElementById('categories-view'),
            quiz: document.getElementById('quiz-view'),
            results: document.getElementById('results-view'),
        };
        
        let currentCategory = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let navigationStack = ['categories'];

        // --- Text-to-Speech ---
        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ku'; // Kurdish language code
                speechSynthesis.speak(utterance);
            } else {
                alert("داوای لێبوردن دەکەین، وێبگەڕەکەت پشتگیری دەنگ ناکات.");
            }
        }
        
        speakQuestionButton.addEventListener('click', () => speak(questionText.textContent));

        // --- Navigation ---
        function navigateTo(viewName, direction = 'forward') {
            const currentViewName = navigationStack[navigationStack.length - 1];
            if (currentViewName === viewName) return;

            const currentView = views[currentViewName];
            const nextView = views[viewName];

            let slideOutClass, slideInClass;
            if (direction === 'forward') {
                slideOutClass = 'slide-out-left';
                slideInClass = 'slide-in-right';
                navigationStack.push(viewName);
            } else {
                slideOutClass = 'slide-out-right';
                slideInClass = 'slide-in-left';
                navigationStack.pop();
            }

            currentView.classList.add(slideOutClass);
            nextView.classList.remove('hidden');
            nextView.classList.add(slideInClass);
            
            setTimeout(() => {
                currentView.classList.add('hidden');
                currentView.classList.remove(slideOutClass);
                nextView.classList.remove(slideInClass);
            }, 350);
            
            updateHeader();
        }

        function updateHeader() {
            const currentViewName = navigationStack[navigationStack.length - 1];
            if (currentViewName === 'categories') {
                headerTitle.textContent = 'Kategorî';
                backButton.classList.add('hidden');
            } else if (currentViewName === 'quiz') {
                headerTitle.textContent = quizData[currentCategory].title;
                backButton.classList.remove('hidden');
                backButtonText.textContent = 'Kategorî'
            } else if (currentViewName === 'results') {
                headerTitle.textContent = 'Encam';
                backButton.classList.add('hidden'); // Or navigate back to categories
            }
        }
        
        backButton.addEventListener('click', () => {
            if (navigationStack.length > 1) {
                navigateTo(navigationStack[navigationStack.length - 2], 'backward');
            }
        });

        // --- Quiz Logic ---
        function startQuiz(categoryKey) {
            currentCategory = categoryKey;
            currentQuestionIndex = 0;
            score = 0;
            navigateTo('quiz');
            renderQuestion();
        }

        function renderQuestion() {
            scoreDisplay.textContent = score;
            const questions = quizData[currentCategory].questions;
            totalQuestions.textContent = questions.length;
            
            if (currentQuestionIndex >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestionIndex];
            questionCounter.textContent = currentQuestionIndex + 1;
            progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
            questionText.textContent = question.question;
            optionsContainer.innerHTML = '';

            question.options.forEach(option => {
                const button = document.createElement('button');
                button.className = "w-full text-left p-4 rounded-lg list-item quiz-option";
                button.textContent = option;
                button.onclick = () => selectAnswer(button, option, question.answer);
                optionsContainer.appendChild(button);
            });
        }
        
        function selectAnswer(button, selectedOption, correctAnswer) {
            const allOptions = optionsContainer.querySelectorAll('button');
            allOptions.forEach(btn => btn.disabled = true); // Disable all options

            if (selectedOption === correctAnswer) {
                score++;
                button.classList.add('correct');
            } else {
                button.classList.add('incorrect');
                allOptions.forEach(btn => {
                    if (btn.textContent === correctAnswer) {
                        btn.classList.add('correct');
                    }
                });
            }

            setTimeout(() => {
                currentQuestionIndex++;
                renderQuestion();
            }, 1500); // Wait 1.5 seconds before next question
        }

        function showResults() {
            const questions = quizData[currentCategory].questions;
            finalScoreEl.textContent = score;
            totalScoreEl.textContent = questions.length;
            navigateTo('results');
        }
        
        playAgainButton.addEventListener('click', () => {
             navigateTo('categories', 'backward');
        });

        // --- Initial Setup ---
        function renderCategories() {
            categoryList.innerHTML = '';
            Object.keys(quizData).forEach(key => {
                const category = quizData[key];
                const li = document.createElement('li');
                li.className = 'list-item';
                li.onclick = () => startQuiz(key);
                li.innerHTML = `
                    <span>${category.title}</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-[var(--label-secondary)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                    </svg>
                `;
                categoryList.appendChild(li);
            });
        }
        
        // --- App Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            updateHeader();
        });

    </script>
</body>
</html>
